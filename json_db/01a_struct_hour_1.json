{
  "file_metadata": {
    "filename": "01a_struct_hour_1.json",
    "version": "12.0 (Final Patch)",
    "authority": "Dolnytsky Typikon Part I & IV",
    "scope": "The First Hour (All Variants)"
  },
  "structures": {
    "structure_standard": {
      "title_key": "titles.hour_1_standard",
      "sequence": [
        {
          "id": "opening_prayers",
          "content": {
            "type": "fixed_group",
            "rubric": "continuation_check",
            "ref_keys": [
              "horologion.blessing_common",
              "horologion.trisagion_block",
              "horologion.invitatory_3x"
            ]
          }
        },
        {
          "id": "psalms_fixed",
          "content": {
            "type": "fixed_group",
            "ref_keys": [
              "psalm_5",
              "psalm_89",
              "psalm_100"
            ]
          }
        },
        {
          "id": "troparia_block",
          "content": {
            "type": "generator",
            "generator_method": "generate_hour_troparia",
            "rubric": "seasonal_mode",
            "args": {
              "hour": 1
            }
          }
        },
        {
          "id": "verses_fixed",
          "content": {
            "type": "fixed_ref",
            "ref_key": "horologion.verses_hour_1_order_my_steps"
          }
        },
        {
          "id": "trisagion_prayers",
          "content": {
            "type": "fixed_ref",
            "ref_key": "horologion.trisagion_block"
          }
        },
        {
          "id": "kontakion_block",
          "content": {
            "type": "slot_variable",
            "slot_id": "hour_1_kontakion",
            "rubric": "rotation_scheduler",
            "hour": 1
          }
        },
        {
          "id": "conclusion",
          "content": {
            "type": "fixed_group",
            "ref_keys": [
              "horologion.lord_have_mercy_40",
              "horologion.prayer_hours_thou_who",
              "horologion.prayer_hour_1_christ_true_light"
            ]
          }
        },
        {
          "id": "dismissal_slot",
          "content": {
            "type": "fixed_ref",
            "ref_key": "horologion.dismissal_small"
          }
        }
      ]
    },
    "structure_lenten": {
      "title_key": "titles.hour_1_lenten",
      "source_ref": "Dolnytsky IV: AT THE HOURS",
      "inherits_from": "structure_standard",
      "overrides": [
        {
          "target_id": "psalms_fixed",
          "action": "insert_after",
          "new_component": {
            "id": "kathisma_slot",
            "rubric": {
              "roles": {
                "reader": "Read the appointed Kathisma."
              }
            },
            "content": {
              "type": "variable_logic",
              "logic": {
                "function": "resolve_kathisma"
              }
            }
          }
        },
        {
          "target_id": "troparia_block",
          "action": "replace",
          "new_component": {
            "id": "lenten_troparia_1",
            "rubric": {
              "roles": {
                "all": "Make a prostration at each singing of the troparion."
              }
            },
            "content": {
              "type": "fixed_ref",
              "ref_key": "triodion.hour_1_lenten_troparia_verses"
            }
          }
        },
        {
          "target_id": "kontakion_block",
          "action": "replace",
          "new_component": {
            "id": "lenten_kontakia_set",
            "content": {
              "type": "fixed_ref",
              "ref_key": "triodion.lenten_kontakia_hours"
            }
          }
        },
        {
          "target_id": "conclusion",
          "action": "insert_after",
          "new_component": {
            "id": "prayer_ephrem",
            "rubric": {
              "roles": {
                "all": "Make 16 prostrations."
              }
            },
            "content": {
              "type": "fixed_ref",
              "ref_key": "triodion.prayer_st_ephrem"
            }
          }
        }
      ]
    },
    "structure_royal": {
      "title_key": "titles.hour_1_royal",
      "source_ref": "Dolnytsky III & IV",
      "inherits_from": "structure_standard",
      "overrides": [
        {
          "target_id": "psalms_fixed",
          "action": "replace",
          "new_component": {
            "id": "psalms_royal",
            "content": {
              "type": "variable_logic",
              "logic": {
                "function": "resolve_royal_psalms",
                "args": {
                  "hour": 1
                }
              }
            }
          }
        },
        {
          "target_id": "troparia_block",
          "action": "replace",
          "new_component": {
            "id": "stichera_royal",
            "rubric": {
              "title": "Royal Stichera",
              "note": "Three Idiomela with repeats."
            },
            "content": {
              "type": "variable_logic",
              "logic": {
                "function": "resolve_royal_stichera",
                "args": {
                  "hour": 1
                }
              }
            }
          }
        },
        {
          "target_id": "verses_fixed",
          "action": "insert_before",
          "new_component": {
            "id": "readings_royal",
            "rubric": {
              "title": "Scripture Readings",
              "roles": {
                "reader": "Prokeimenon, Paremia, Epistle.",
                "deacon": "Gospel."
              }
            },
            "content": {
              "type": "variable_logic",
              "logic": {
                "function": "resolve_royal_readings",
                "args": {
                  "hour": 1
                }
              }
            }
          }
        },
        {
          "target_id": "dismissal_slot",
          "action": "delete"
        }
      ]
    },
    "structure_paschal": {
      "title_key": "titles.hour_1_paschal",
      "source_ref": "Dolnytsky IV: Resurrection Hours",
      "sequence": [
        {
          "id": "christ_is_risen_3x",
          "content": {
            "type": "fixed_ref",
            "ref_key": "pentecostarion.christ_is_risen_3x"
          }
        },
        {
          "id": "having_beheld_resurrection_3x",
          "content": {
            "type": "fixed_ref",
            "ref_key": "pentecostarion.having_beheld_resurrection_3x"
          }
        },
        {
          "id": "hypakoe_pascha",
          "content": {
            "type": "fixed_ref",
            "ref_key": "pentecostarion.hypakoe_pascha"
          }
        },
        {
          "id": "kontakion_pascha",
          "content": {
            "type": "fixed_ref",
            "ref_key": "pentecostarion.kontakion_pascha"
          }
        },
        {
          "id": "paschal_troparia",
          "content": {
            "type": "fixed_ref",
            "ref_key": "pentecostarion.troparia_paschal_hours"
          }
        },
        {
          "id": "conclusion",
          "content": {
            "type": "fixed_group",
            "ref_keys": [
              "horologion.lord_have_mercy_40",
              "pentecostarion.dismissal_paschal_hours"
            ]
          }
        }
      ]
    }
  }
}